"use strict";!function(t,a,e){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(a||e)}(function(u){var i=function(l,m,M){var y={invalid:[],getCaret:function(){try{var t,a=0,e=l.get(0),n=document.selection,r=e.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=n.createRange()).moveStart("character",-y.val().length),a=t.text.length):(r||"0"===r)&&(a=r),a}catch(t){}},setCaret:function(t){try{if(l.is(":focus")){var a,e=l.get(0);t+=1,e.setSelectionRange?e.setSelectionRange(t,t):((a=e.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(t){}},events:function(){l.on("keydown.mask",function(t){l.data("mask-keycode",t.keyCode||t.which)}).on(u.jMaskGlobals.useInput?"input.mask":"keyup.mask",y.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){l.keydown().keyup()},100)}).on("change.mask",function(){l.data("changed",!0)}).on("blur.mask",function(){o===y.val()||l.data("changed")||l.trigger("change"),l.data("changed",!1)}).on("blur.mask",function(){o=y.val()}).on("focus.mask",function(t){!0===M.selectOnFocus&&u(t.target).select()}).on("focusout.mask",function(){M.clearIfNotMatch&&!s.test(y.val())&&y.val("")})},getRegexMask:function(){for(var t,a,e,n,r,s,o=[],i=0;i<m.length;i++)(t=b.translation[m.charAt(i)])?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),e=t.optional,(n=t.recursive)?(o.push(m.charAt(i)),r={digit:m.charAt(i),pattern:a}):o.push(e||n?a+"?":a)):o.push(m.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return s=o.join(""),r&&(s=s.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(s)},destroyEvents:function(){l.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var a,e=l.is("input")?"val":"text";return 0<arguments.length?(l[e]()!==t&&l[e](t),a=l):a=l[e](),a},getMCharsBeforeCount:function(t,a){for(var e=0,n=0,r=m.length;n<r&&n<t;n++)b.translation[m.charAt(n)]||(t=a?t+1:t,e++);return e},caretPos:function(t,a,e,n){return b.translation[m.charAt(Math.min(t-1,m.length-1))]?Math.min(t+e-a-n,e):y.caretPos(t+1,a,e,n)},behaviour:function(t){t=t||window.event,y.invalid=[];var a=l.data("mask-keycode");if(-1===u.inArray(a,b.byPassKeys)){var e=y.getCaret(),n=y.val(),r=n.length,s=y.getMasked(),o=s.length,i=y.getMCharsBeforeCount(o-1)-y.getMCharsBeforeCount(r-1),c=e<r&&s!==n;return y.val(s),c&&(8!==a&&46!==a?e=y.caretPos(e,r,o,i):e-=1,y.setCaret(e)),y.callbacks(t)}},getMasked:function(t,a){var e,n,r,s=[],o=void 0===a?y.val():a+"",i=0,c=m.length,l=0,u=o.length,h=1,f="push",v=-1;for(M.reverse?(f="unshift",h=-1,e=0,i=c-1,l=u-1,n=function(){return-1<i&&-1<l}):(e=c-1,n=function(){return i<c&&l<u});n();){var d=m.charAt(i),k=o.charAt(l),p=b.translation[d];p?(k.match(p.pattern)?(s[f](k),p.recursive&&(-1===v?v=i:i===e&&(i=v-h),e===v&&(i-=h)),i+=h):k===r?r=void 0:p.optional?(i+=h,l-=h):p.fallback?(s[f](p.fallback),i+=h,l-=h):y.invalid.push({p:l,v:k,e:p.pattern}),l+=h):(t||s[f](d),k===d?l+=h:r=d,i+=h)}var g=m.charAt(e);return c!==u+1||b.translation[g]||s.push(g),s.join("")},callbacks:function(t){var a=y.val(),e=a!==o,n=[a,t,l,M],r=function(t,a,e){"function"==typeof M[t]&&a&&M[t].apply(this,e)};r("onChange",!0===e,n),r("onKeyPress",!0===e,n),r("onComplete",a.length===m.length,n),r("onInvalid",0<y.invalid.length,[a,t,l,y.invalid,M])}};l=u(l);var s,b=this,o=y.val();m="function"==typeof m?m(y.val(),void 0,l,M):m,b.mask=m,b.options=M,b.remove=function(){var t=y.getCaret();return y.destroyEvents(),y.val(b.getCleanVal()),y.setCaret(t-y.getMCharsBeforeCount(t)),l},b.getCleanVal=function(){return y.getMasked(!0)},b.getMaskedVal=function(t){return y.getMasked(!1,t)},b.init=function(t){if(t=t||!1,M=M||{},b.clearIfNotMatch=u.jMaskGlobals.clearIfNotMatch,b.byPassKeys=u.jMaskGlobals.byPassKeys,b.translation=u.extend({},u.jMaskGlobals.translation,M.translation),b=u.extend(!0,{},b,M),s=y.getRegexMask(),t)y.events(),y.val(y.getMasked());else{M.placeholder&&l.attr("placeholder",M.placeholder),l.data("mask")&&l.attr("autocomplete","off");for(var a=0,e=!0;a<m.length;a++){var n=b.translation[m.charAt(a)];if(n&&n.recursive){e=!1;break}}e&&l.attr("maxlength",m.length),y.destroyEvents(),y.events();var r=y.getCaret();y.val(y.getMasked()),y.setCaret(r+y.getMCharsBeforeCount(r,!0))}},b.init(!l.is("input"))};u.maskWatchers={};var a=function(){var t=u(this),a={},e="data-mask-",n=t.attr("data-mask");if(t.attr(e+"reverse")&&(a.reverse=!0),t.attr(e+"clearifnotmatch")&&(a.clearIfNotMatch=!0),"true"===t.attr(e+"selectonfocus")&&(a.selectOnFocus=!0),c(t,n,a))return t.data("mask",new i(this,n,a))},c=function(t,a,e){e=e||{};var n=u(t).data("mask"),r=JSON.stringify,s=u(t).val()||u(t).text();try{return"function"==typeof a&&(a=a(s)),"object"!=typeof n||r(n.options)!==r(e)||n.mask!==a}catch(t){}};u.fn.mask=function(t,a){a=a||{};var e=this.selector,n=u.jMaskGlobals,r=n.watchInterval,s=a.watchInputs||n.watchInputs,o=function(){if(c(this,t,a))return u(this).data("mask",new i(this,t,a))};return u(this).each(o),e&&""!==e&&s&&(clearInterval(u.maskWatchers[e]),u.maskWatchers[e]=setInterval(function(){u(document).find(e).each(o)},r)),this},u.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},u.fn.unmask=function(){return clearInterval(u.maskWatchers[this.selector]),delete u.maskWatchers[this.selector],this.each(function(){var t=u(this).data("mask");t&&t.remove().removeData("mask")})},u.fn.cleanVal=function(){return this.data("mask").getCleanVal()},u.applyDataMask=function(t){((t=t||u.jMaskGlobals.maskElements)instanceof u?t:u(t)).filter(u.jMaskGlobals.dataMaskAttr).each(a)};var t,e,n,r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:(t="input",n=document.createElement("div"),(e=(t="on"+t)in n)||(n.setAttribute(t,"return;"),e="function"==typeof n[t]),n=null,e),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};u.jMaskGlobals=u.jMaskGlobals||{},(r=u.jMaskGlobals=u.extend(!0,{},r,u.jMaskGlobals)).dataMask&&u.applyDataMask(),setInterval(function(){u.jMaskGlobals.watchDataMask&&u.applyDataMask()},r.watchInterval)},window.jQuery,window.Zepto);